---
title: Operators
description: Available operators and their precedence.
---

## Operators

The following operators can be used in expressions.

### Mathematical Operators

These operators carry out basic mathematical operations.

- `+`: Adds both operands.
- `-`: Subtracts the right operand from the left.
- `*`: Multiplies both operands.
- `/`: Divides the left operand by the right. If the divisor is zero, the result of the operation is `0` instead
  of `Inf`.
- `%`: Converts the operands to integers and returns the remainder of the left by the right operand.
- `^`: Calculates the left operand to the power of the right operand.

### Equality Operators

These operators check for equality or inequality of the operands and return a boolean result:

- `==`: Equal. Returns `1` if both operands are equal, `0` if not.
- `!=`: Not equal. Returns `1` if both operands are not equal, `0` if they are.
- `<`: Below. Returns `1` if the left operand is below the right operand, `0` otherwise.
- `>`: Above. Returns `1` if the left operand is above the right operand, `0` otherwise.
- `<=`: Below or equal. Returns `1` if the left operand is below or equal to the right operand, `0` otherwise.
- `>=`: Above or equal. Returns `1` if the left operand is above or equal to the right operand, `0` otherwise.

### Binary Arithmetic Operators

The following operators allow to carry out bitwise operations on integer representations of the operands:

- `&`: Converts both arguments to integers and calculates the bitwise AND between the resulting operands.
- `|`: Converts both arguments to integers and calculates the bitwise OR between the resulting operands.

### Boolean Operators

Boolean operators only check an operand to be zero or non-zero, then return the according result:

- `&&`: Returns `1` if both operands are non-zero and `0` if any operand is zero.
- `||`: Returns `1` if one or both operands are non-zero and `0` if both operands are zero.
- `!`: Unary operator. Returns `1` if the operand is zero and `0` if the operand is non-zero.
- `a ? b : c`: The ternary operator. Evaluates the `a` operand and evaluates and returns the `b` operand if the
  condition is non-zero. If the condition evaluates to zero, only the `c` operand is evaluated and returned.

### Assignment Operators

Assignment operators can simply assign the result of the right-hand side to a variable or megabuf index, or in case of
compound operators `a OP= b` also carry out an additional operation equivalent to `a = a OP B`. All assignment operators
return a reference to the left operand.

- `=`: Assigns the value of the right operand to the left operand.
- `+=`: Adds the value of the right operand to the left operand and assigns the result to the left operand.
- `-=`: Subtracts the value of the right operand from the left operand and assigns the result to the left operand.
- `*=`: Multiplies the value of the right operand with the left operand and assigns the result to the left operand.
- `/=`: Divides the left operand by the value of the right operand and assigns the result to the left operand. If the
  divisor is zero, the result of the operation is `0` instead of `Inf`.
- `%=`: Calculates the remainder of the rounded integer values of the left operand divided by the right operand and
  assigns the result to the left operand. If the divisor is `0`, the result will also be `0`.
- `^=`: Calculates the left operand to the power of the right operand and assigns the result to the left operand.
- `&=`: Calculates the binary AND of the rounded integer values of the left and right operands and assigns the result to
  the left operand.
- `|=`: Calculates the binary OR of the rounded integer values of the left and right operands and assigns the result to
  the left operand.

### Subscript Operator

The subscript - or index - operator `[]` is a special notation to access megabuf and gmegabuf. If the inside of the
brackets is empty, it is interpreted as a `0`. For more details, see the "Subscript Access" section above.

## Operator Precedence

Operator precedence is defined in a similar way as in C, except the `^` operator, which has a different
meaning in Milkdrop presets (pow() instead of binary XOR). This operator has higher precedence than the `!` unary
operator and lower precedence than the `-` and `+` unary sign operators.

Since parentheses have the highest precedence, they can be used to override any pre-defined precedence and strictly
specify execution order. Heavily using parentheses _does not incur a performance penalty_, as it only affects the way
the execution tree is built at compile-time (e.g. when the preset is initially loaded).

This is a list of precedence, with operators in the same line having equal precedence and are executed in their order of
writing, with respect to the value alignment noted, lowest precedence is listed last:

| Operator        | Alignment | Comment                                            |
|-----------------|-----------|----------------------------------------------------|
| `(` `)`         | Left      |                                                    |
| `[` `]`         | Left      |                                                    |
| `-` `+`         | Right     | Unary sign operators before variables and numbers. |
| `^`             | Left      | Not XOR, but pow(left, right) in Milkdrop.         |
| `!`             | Right     | Unary negation.                                    |
| `%`             | Left      |                                                    |
| `*` `/`         | Left      |                                                    |
| `+` `-`         | Left      | Binary addition/subtraction.                       |
| `<` `<=`        | Left      |                                                    |
| `>` `>=`        | Left      |                                                    |
| `==` `!=`       | Left      |                                                    |
| `&`             | Left      |                                                    |
| `\|`            | Left      |                                                    |
| `&&`            | Left      |                                                    |
| `\|\|`          | Left      |                                                    |
| `?` `:`         | Right     | Ternary operator (inline if).                      |
| `^=` `\|=` `&=` | Right     |                                                    |
| `*=` `/=` `%=`  | Right     |                                                    |
| `+=` `-=`       | Right     |                                                    |
| `=`             | Right     |                                                    |
| `,`             | Left      | Argument separator in functions.                   |

Alignment specifies which side of the operator will have higher precedence when building the execution tree, e.g. will
be evaluated first.

See the [C precedence table on cppreference.com](https://en.cppreference.com/w/c/language/operator_precedence) for
details.
